{"version":3,"sources":["webpack:///5.js","webpack:///./src/view/chat.vue?771b","webpack:///./src/assets/icon_yizhu@2x.png","webpack:///./src/view/chat.vue?79a3","webpack:///./src/view/chat.vue?f63a","webpack:///./src/assets/static-left.jpg","webpack:///./src/assets/loading-left.gif","webpack:///./src/assets/static-right.jpg","webpack:///./src/assets/loading-right.gif","webpack:///./src/view/chat.vue","webpack:///./src/view/chat.vue?d194","webpack:///./src/assets/loading.gif"],"names":["webpackJsonp","120","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vux_loader_1_1_23_vux_loader_src_script_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_script_index_0_chat_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_5b03d85c_hasScoped_false_buble_transforms_node_modules_vux_loader_1_1_23_vux_loader_src_before_template_compiler_loader_js_node_modules_vux_loader_1_1_23_vux_loader_src_template_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_template_index_0_chat_vue__","normalizeComponent","__vue_styles__","Component","125","exports","p","275","content","i","locals","276","undefined","push","277","278","279","280","281","$","__WEBPACK_IMPORTED_MODULE_0__server__","data","myhead","chatList","inputText","servicedetailid","this","$route","params","msg","defaultImg","BASEIMGURL","send","cansend","setint","created","status","watch","$nextTick","setTimeout","last","length","get","scrollIntoView","methods","inputFocus","_this","$refs","inputBox","sendmessage","e","currentTarget","blur","trim","$vux","toast","text","item","createDate","Date","getFullYear","getMonth","getDate","url","secondType","load","obj","oi","msgType","sendmsg","then","res","code","uploadimg","click","upchange","abc","FormData","append","target","files","JSON","stringify","parse","urls","paname","pname","playMp3","audio","next","play","addClass","onended","removeClass","msgApi","_this2","getmsg","alert","show","clearInterval","chatData","list","sort","a","b","forEach","time","getuserinfo","userHead","mounted","$store","state","phone","token","setInterval","beforeDestroy","call","282","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","_m","_v","_l","one","index","class","left","pusherName","doctorName","right","_s","src","headUrl","alt","onerror","_e","directives","name","rawName","expression","staticStyle","position","width","top","style","duration","on","$event","type","domProps","focus","input","composing","xmlns","height","viewBox","d","display","change","staticRenderFns","href","esExports","283"],"mappings":"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","file":"5.js?4cf212ddc496aac4b7e7","sourcesContent":["webpackJsonp([5],{\n\n/***/ 120:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vux_loader_1_1_23_vux_loader_src_script_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_script_index_0_chat_vue__ = __webpack_require__(281);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_5b03d85c_hasScoped_false_buble_transforms_node_modules_vux_loader_1_1_23_vux_loader_src_before_template_compiler_loader_js_node_modules_vux_loader_1_1_23_vux_loader_src_template_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_template_index_0_chat_vue__ = __webpack_require__(282);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(275)\n}\nvar normalizeComponent = __webpack_require__(1)\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vux_loader_1_1_23_vux_loader_src_script_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_script_index_0_chat_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_5b03d85c_hasScoped_false_buble_transforms_node_modules_vux_loader_1_1_23_vux_loader_src_before_template_compiler_loader_js_node_modules_vux_loader_1_1_23_vux_loader_src_template_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_template_index_0_chat_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 125:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/icon_yizhu@2x.png?5517edf19dc71a40f55323ec201dfcfe\";\n\n/***/ }),\n\n/***/ 275:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(276);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(3)(\"18a4ccf7\", content, true);\n\n/***/ }),\n\n/***/ 276:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(2)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"#chat{font-size:0;transition:opacity .2s ease;min-height:100%;background-color:#f6f6f6}#chat .blank-block{height:.5rem}#chat input:focus{outline:none;-webkit-appearance:none}#chat .chat-text-box{background:#f6f6f6;padding:.12rem}#chat .chat-text-box .tips{font-size:.14rem;color:#999;background:#ebebeb;text-align:center;padding:.1rem}#chat .chat-text-box .tips a{color:#00a560}#chat .text-area-item{font-size:.14rem;color:#fff;overflow:hidden;margin-bottom:.1rem;background-color:#f6f6f6}#chat .text-area-item .time{font-size:.12rem;color:#ccc;text-align:center;width:2.1rem;margin:.1rem auto;border-radius:.04rem;padding:.02rem 0}#chat .text-area-item .inner .content{max-width:2.6rem;min-width:.4rem;min-height:.4rem;margin:0 .1rem;border-radius:.04rem;padding:.1rem;box-sizing:border-box;word-break:break-all;text-align:justify;font-size:.16rem;color:#333}#chat .text-area-item.left .content{background-color:#fff;position:relative}#chat .text-area-item.left .content:before{content:\\\"\\\";display:inline-block;position:absolute;width:0;height:0;background-color:transparent;border:.08rem solid #fff;top:.12rem;border-left-color:transparent;border-top-color:transparent;border-bottom-color:transparent;left:-.14rem}#chat .text-area-item.right .content{background-color:#b0f5bf;position:relative}#chat .text-area-item.right .content:after{content:\\\"\\\";display:inline-block;position:absolute;width:0;height:0;background-color:transparent;border:.08rem solid #b0f5bf;right:-.14rem;top:.12rem;border-right-color:transparent;border-top-color:transparent;border-bottom-color:transparent}#chat .text-area-item .inner .avatar{width:.4rem;height:.4rem;border-radius:50%}#chat .text-area-item .doc-name{color:#666;padding-left:.1rem;font-size:.12rem}#chat .text-area-item.left .avatar,#chat .text-area-item.left .content{float:left}#chat .text-area-item .content button{display:inline-block;width:.16rem;height:.16rem;background-size:100% 100%;background-color:transparent;border:none;outline:none}#chat .text-area-item.left .content button{background-image:url(\" + __webpack_require__(277) + \")}#chat .text-area-item.left .content button.change{background-image:url(\" + __webpack_require__(278) + \")}#chat .text-area-item.right .content button{background-image:url(\" + __webpack_require__(279) + \")}#chat .text-area-item.right .content button.change{background-image:url(\" + __webpack_require__(280) + \")}#chat .text-area-item.right .content .duration{left:-.3rem}#chat .text-area-item.left .content .duration,#chat .text-area-item.right .content .duration{position:absolute;display:inline-block;width:.3rem;height:.3rem;top:.04rem;color:#999;font-size:.12rem;text-align:center;line-height:.3rem}#chat .text-area-item.left .content .duration{left:.5rem}#chat .text-area-item.left .box{float:left}#chat .text-area-item.right .avatar,#chat .text-area-item.right .box,#chat .text-area-item.right .content{float:right}#chat .text-area-item.left .content .card-box{border:2px solid #00a560;padding:.1rem;border-radius:4px;width:2rem;overflow:hidden}#chat .text-area-item.left .content .card-box .card-title{padding-bottom:.03rem;border-bottom:1px dashed #e9e9e9;text-align:right;font-size:.14rem;color:#999}#chat .text-area-item.left .content .card-box .card-info{overflow:hidden;width:100%;margin-top:.05rem;font-size:0}#chat .text-area-item.left .content .card-box .card-info img{width:.36rem;height:.36rem;border-radius:.36rem;float:left;margin-right:.05rem}#chat .text-area-item.left .content .card-box .card-info .info{float:right;overflow:hidden;width:calc(100% - .41rem)}#chat .text-area-item.left .content .card-box .card-info .info p{word-break:normal;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#chat .text-area-item.left .content .card-box .card-info .info p:first-child{font-size:.12rem;color:#999}#chat .text-area-item.left .content .card-box .card-info .info p:first-child span{color:#333;font-size:.14rem}#chat .text-area-item.left .content .card-box .card-info .info p:last-child{font-size:.14rem;color:#7dcbff}#chat .input-box{position:fixed;width:100%;left:0;bottom:0;height:.5rem;background:#f4f4f6;line-height:.5rem;border-top:1px solid #e9e9e9;box-shadow:0 -1px 0 0 #f4f4f6;-webkit-touch-callout:none;-moz-touch-callout:none;-ms-touch-callout:none;touch-callout:none}#chat .input-box .record{padding:0 .1rem;display:inline-block}#chat .record img{width:.25rem;vertical-align:middle}#chat .input-box div .plus{width:.3rem;height:.3rem;vertical-align:middle}#chat .input-box input{border:none;padding:0 .1rem;width:2.55rem;margin-left:.2rem}#chat .input-box button,#chat .input-box input{height:.4rem;vertical-align:middle;font-size:.14rem}#chat .input-box button{border:1px solid #e9e9e9;border-radius:5px;width:2.75rem;outline:none;background-color:transparent}#chat .input-box button.active{background-color:#dfdfdf}#chat .input-box .upload-img{padding-left:.1rem;display:inline-block}#chat .input-box .upload-img div{font-size:12px;display:inline-block;vertical-align:middle;color:#fff;height:.3rem;width:.4rem;background-color:#00a560;text-align:center;line-height:.3rem;border-radius:3px}#chat .input-box .no-click{position:absolute;width:100%;height:100%;background-color:transparent;top:0;left:0}#chat .record-modal{background:rgba(0,0,0,.4);width:100%;height:100%;left:0;top:0;position:fixed;z-index:12;display:none}#chat .record-modal.show{display:block}#chat .record-modal .content{width:1rem;height:1rem;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;background:#fff;width:2rem;height:2rem}#chat .loading-modal{position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(1,1,1,.1);text-align:center}#chat .loading-modal img{display:inline-block;width:1rem;height:1rem;position:absolute;margin-top:-.5rem;top:50%;margin-left:-.5rem;left:50%}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 277:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/static-left.jpg?88f825891cdadbedb590581f5b9d8cb9\";\n\n/***/ }),\n\n/***/ 278:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/loading-left.gif?15150bde510b2a4aa5cfd47dcb5a3657\";\n\n/***/ }),\n\n/***/ 279:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/static-right.jpg?10b908cd3e9f484a1839983bc026de35\";\n\n/***/ }),\n\n/***/ 280:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/loading-right.gif?fbb643771c6c5524150b257d604c6c69\";\n\n/***/ }),\n\n/***/ 281:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__server__ = __webpack_require__(20);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      myhead: '',\n      chatList: [],\n      inputText: '',\n      servicedetailid: this.$route.params.servicedetailid,\n      msg: {},\n      defaultImg: 'this.src=\"' + __webpack_require__(125) + '\"', //默认图片\n      BASEIMGURL: __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].BASEIMGURL,\n      send: false,\n      cansend: true,\n      setint: ''\n    };\n  },\n  created: function created() {\n    if (this.$route.params.status == 2) {\n      //如果是历史隐藏掉聊天框\n      this.cansend = false;\n    }\n  },\n\n  watch: {\n    chatList: function chatList() {\n      this.$nextTick(function () {\n        setTimeout(function () {\n          if ($('.text-area-item').last().length) {\n            $('.text-area-item').last().get(0).scrollIntoView();\n          }\n        }, 400);\n      });\n    },\n    inputText: function inputText() {\n      if (this.inputText.length > 0) {\n        this.send = true;\n      } else {\n        this.send = false;\n      }\n    }\n  },\n  methods: {\n    inputFocus: function inputFocus() {\n      //解决input框被键盘遮挡\n      var _this = this;\n      setTimeout(function () {\n        var pannel = _this.$refs.inputBox;\n        pannel.scrollIntoView(true);\n      }, 200);\n    },\n    sendmessage: function sendmessage(e) {\n      var _this = this;\n      $(e.currentTarget).blur();\n      if (!this.inputText.trim()) {\n        this.$vux.toast.text('发送信息不能为空', 'top');\n        return false;\n      }\n      var item = {\n        createDate: new Date().getFullYear() + '-' + (new Date().getMonth() + 1) + '-' + new Date().getDate(),\n        url: 'src/assets/portrait@2x.png',\n        content: this.inputText,\n        secondType: '4001',\n        load: true\n      };\n      this.chatList.push(item);\n      var obj = {\n        'oi': _this.servicedetailid,\n        'msgType': 'txt',\n        'content': _this.inputText\n      };\n      _this.inputText = '';\n      __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].sendmsg(obj).then(function (res) {\n        if (res.code == '000') {\n          _this.chatList[_this.chatList.length - 1].load = false;\n        }\n      });\n    },\n    uploadimg: function uploadimg() {\n      //模拟input file点击\n      $('#upLoad').click();\n    },\n    upchange: function upchange(e) {\n      //file改变事件\n      var _this = this;\n      var abc = new FormData();\n      abc.append(\"content\", e.target.files[0]);\n      abc.append('METHOD', 'uploadimage');\n      abc.append('RECDATA', JSON.stringify({ code: 'chat' }));\n      var item = {\n        createDate: new Date().getFullYear() + '-' + (new Date().getMonth() + 1) + '-' + new Date().getDate(),\n        url: 'src/assets/portrait@2x.png',\n        content: 'src/assets/loading.gif',\n        secondType: '4003'\n      };\n      _this.chatList.push(item);\n      __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].uploadimg(abc, function (res) {\n        if (res.code === '000') {\n          var data = JSON.parse(res.data);\n          var url = data.urls[0];\n          var paname = data.pname[0];\n          var obj = {\n            'oi': _this.servicedetailid,\n            'msgType': 'img',\n            'content': paname\n          };\n          __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].sendmsg(obj).then(function (res) {\n            if (res.code === '000') {\n              _this.chatList[_this.chatList.length - 1].content = url;\n            }\n          });\n        }\n      });\n    },\n    playMp3: function playMp3(e) {\n      //播放语音\n      var _this = $(e.currentTarget);\n      var audio = $(e.currentTarget).next()[0];\n      audio.play();\n      _this.addClass('change');\n      audio.onended = function () {\n        _this.removeClass('change');\n      };\n    },\n    msgApi: function msgApi() {\n      var _this2 = this;\n\n      var _this = this;\n      __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].getmsg({ 'oi': _this.servicedetailid }).then(function (res) {\n        if (res.code == '000') {\n          if (JSON.parse(res.data).status > 3) {\n            //会诊结束\n            _this.$vux.alert.show({\n              content: '您的会话已结束！'\n            });\n            _this.cansend = false;\n            clearInterval(_this2.setint);\n          }\n          _this.msg = JSON.parse(res.data);\n          var chatData = _this.msg.list;\n\n          chatData.sort(function (a, b) {\n            return a.createDate - b.createDate;\n          });\n          chatData.forEach(function (data) {\n            var time = data.createDate;\n            data.createDate = new Date(time).getFullYear() + '-' + (new Date(time).getMonth() + 1) + '-' + new Date(time).getDate();\n          });\n          _this.chatList = chatData;\n          __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].getuserinfo({}).then(function (res) {\n            if (res.code === '000') {\n              var data = JSON.parse(res.data);\n              _this.myhead = data.userHead;\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n    this.$nextTick(function () {\n      setTimeout(function () {\n        if ($('.text-area-item').last().length) {\n          $('.text-area-item').last().get(0).scrollIntoView();\n        }\n      }, 400);\n    });\n\n    if (this.$store.state.phone && this.$store.state.token) {\n      _this.msgApi();\n      _this.setint = setInterval(function () {\n        _this.msgApi();\n      }, 50000);\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    //路由销毁\n    clearInterval(this.setint);\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(8)))\n\n/***/ }),\n\n/***/ 282:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"chat\"}},[_c('div',{staticClass:\"chat-text-box\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"text-area-list\"},_vm._l((_vm.chatList),function(one,index){return _c('div',{staticClass:\"text-area-item\",class:{left:one.pusherName == _vm.msg.doctorName,right:one.pusherName !== _vm.msg.doctorName}},[_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(one.createDate))]),_vm._v(\" \"),_c('div',{staticClass:\"inner\"},[(one.pusherName==_vm.msg.doctorName)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.BASEIMGURL + one.headUrl,\"alt\":\"\",\"onerror\":_vm.defaultImg}}):_vm._e(),_vm._v(\" \"),(one.pusherName!=_vm.msg.doctorName)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.myhead,\"alt\":\"\",\"onerror\":_vm.defaultImg}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:((one.pusherName == _vm.msg.doctorName)),expression:\"(one.pusherName == msg.doctorName)\"}],staticClass:\"doc-name\"},[_vm._v(_vm._s(one.pusherName))]),_vm._v(\" \"),(one.secondType==='4001')?_c('div',{staticClass:\"content\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(one.load),expression:\"one.load\"}],staticStyle:{\"position\":\"absolute\",\"width\":\".3rem\",\"left\":\"-.3rem\",\"top\":\"0.04rem\"},attrs:{\"src\":__webpack_require__(283)}}),_vm._v(\"\\n              \"+_vm._s(one.content)+\"\\n            \")]):_vm._e(),_vm._v(\" \"),(one.secondType==='4003')?_c('div',{staticClass:\"content\"},[_c('img',{staticStyle:{\"width\":\"1rem\"},attrs:{\"src\":one.content,\"alt\":\"error\"}})]):_vm._e(),_vm._v(\" \"),(one.secondType==='4002')?_c('div',{staticClass:\"content\",style:('width:'+one.duration/10+'rem')},[_c('span',{staticClass:\"duration\"},[_vm._v(_vm._s(one.duration))]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.playMp3($event)}}}),_vm._v(\" \"),_c('audio',{attrs:{\"src\":one.content}})]):_vm._e()])])])}))]),_vm._v(\" \"),_c('div',{staticClass:\"blank-block\"}),_vm._v(\" \"),(_vm.cansend)?_c('div',{staticClass:\"input-box\",attrs:{\"id\":\"inputBox\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputText),expression:\"inputText\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.inputText)},on:{\"focus\":_vm.inputFocus,\"input\":function($event){if($event.target.composing){ return; }_vm.inputText=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"upload-img\"},[_c('svg',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.send),expression:\"!send\"}],staticClass:\"vux-x-icon vux-x-icon-ios-plus-outline plus\",attrs:{\"type\":\"ios-plus-outline\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 512 512\"},on:{\"click\":_vm.uploadimg}},[_c('path',{attrs:{\"d\":\"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm0 398.7c-105.1 0-190.7-85.5-190.7-190.7S150.9 65.3 256 65.3 446.7 150.9 446.7 256 361.1 446.7 256 446.7z\"}}),_c('path',{attrs:{\"d\":\"M264.1 128h-16.8v119.9H128v16.8h119.3V384h16.8V264.7H384v-16.8H264.1z\"}})]),_vm._v(\" \"),_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"upLoad\"},on:{\"change\":function($event){_vm.upchange($event)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.send),expression:\"send\"}],on:{\"click\":_vm.sendmessage}},[_vm._v(\"发送\")])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"tips\"},[_vm._v(\"请描述病情，等待医生回复。\"),_c('br'),_vm._v(\"客服电话\"),_c('a',{attrs:{\"href\":\"tel:4001816106\"}},[_vm._v(\"400-181-6106\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 283:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/loading.gif?ab5dccb6ad64570e49336400a399cef0\";\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 5.js?4cf212ddc496aac4b7e7","function injectStyle (ssrContext) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5b03d85c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vux-loader@1.1.23@vux-loader/src/after-less-loader.js!less-loader!../../node_modules/_vux-loader@1.1.23@vux-loader/src/style-loader.js!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./chat.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vux-loader@1.1.23@vux-loader/src/script-loader.js!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./chat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5b03d85c\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vux-loader@1.1.23@vux-loader/src/before-template-compiler-loader.js!../../node_modules/_vux-loader@1.1.23@vux-loader/src/template-loader.js!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./chat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/chat.vue\n// module id = 120\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/icon_yizhu@2x.png?5517edf19dc71a40f55323ec201dfcfe\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/icon_yizhu@2x.png\n// module id = 125\n// module chunks = 2 4 5 6 8 13","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.7@css-loader/index.js?minimize!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5b03d85c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vux-loader@1.1.23@vux-loader/src/after-less-loader.js!../../node_modules/_less-loader@4.0.5@less-loader/dist/cjs.js!../../node_modules/_vux-loader@1.1.23@vux-loader/src/style-loader.js!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./chat.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"18a4ccf7\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-style-loader@3.0.3@vue-style-loader!./node_modules/_css-loader@0.28.7@css-loader?minimize!./node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5b03d85c\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vux-loader@1.1.23@vux-loader/src/after-less-loader.js!./node_modules/_less-loader@4.0.5@less-loader/dist/cjs.js!./node_modules/_vux-loader@1.1.23@vux-loader/src/style-loader.js!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./src/view/chat.vue\n// module id = 275\n// module chunks = 5","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"#chat{font-size:0;transition:opacity .2s ease;min-height:100%;background-color:#f6f6f6}#chat .blank-block{height:.5rem}#chat input:focus{outline:none;-webkit-appearance:none}#chat .chat-text-box{background:#f6f6f6;padding:.12rem}#chat .chat-text-box .tips{font-size:.14rem;color:#999;background:#ebebeb;text-align:center;padding:.1rem}#chat .chat-text-box .tips a{color:#00a560}#chat .text-area-item{font-size:.14rem;color:#fff;overflow:hidden;margin-bottom:.1rem;background-color:#f6f6f6}#chat .text-area-item .time{font-size:.12rem;color:#ccc;text-align:center;width:2.1rem;margin:.1rem auto;border-radius:.04rem;padding:.02rem 0}#chat .text-area-item .inner .content{max-width:2.6rem;min-width:.4rem;min-height:.4rem;margin:0 .1rem;border-radius:.04rem;padding:.1rem;box-sizing:border-box;word-break:break-all;text-align:justify;font-size:.16rem;color:#333}#chat .text-area-item.left .content{background-color:#fff;position:relative}#chat .text-area-item.left .content:before{content:\\\"\\\";display:inline-block;position:absolute;width:0;height:0;background-color:transparent;border:.08rem solid #fff;top:.12rem;border-left-color:transparent;border-top-color:transparent;border-bottom-color:transparent;left:-.14rem}#chat .text-area-item.right .content{background-color:#b0f5bf;position:relative}#chat .text-area-item.right .content:after{content:\\\"\\\";display:inline-block;position:absolute;width:0;height:0;background-color:transparent;border:.08rem solid #b0f5bf;right:-.14rem;top:.12rem;border-right-color:transparent;border-top-color:transparent;border-bottom-color:transparent}#chat .text-area-item .inner .avatar{width:.4rem;height:.4rem;border-radius:50%}#chat .text-area-item .doc-name{color:#666;padding-left:.1rem;font-size:.12rem}#chat .text-area-item.left .avatar,#chat .text-area-item.left .content{float:left}#chat .text-area-item .content button{display:inline-block;width:.16rem;height:.16rem;background-size:100% 100%;background-color:transparent;border:none;outline:none}#chat .text-area-item.left .content button{background-image:url(\" + require(\"../assets/static-left.jpg\") + \")}#chat .text-area-item.left .content button.change{background-image:url(\" + require(\"../assets/loading-left.gif\") + \")}#chat .text-area-item.right .content button{background-image:url(\" + require(\"../assets/static-right.jpg\") + \")}#chat .text-area-item.right .content button.change{background-image:url(\" + require(\"../assets/loading-right.gif\") + \")}#chat .text-area-item.right .content .duration{left:-.3rem}#chat .text-area-item.left .content .duration,#chat .text-area-item.right .content .duration{position:absolute;display:inline-block;width:.3rem;height:.3rem;top:.04rem;color:#999;font-size:.12rem;text-align:center;line-height:.3rem}#chat .text-area-item.left .content .duration{left:.5rem}#chat .text-area-item.left .box{float:left}#chat .text-area-item.right .avatar,#chat .text-area-item.right .box,#chat .text-area-item.right .content{float:right}#chat .text-area-item.left .content .card-box{border:2px solid #00a560;padding:.1rem;border-radius:4px;width:2rem;overflow:hidden}#chat .text-area-item.left .content .card-box .card-title{padding-bottom:.03rem;border-bottom:1px dashed #e9e9e9;text-align:right;font-size:.14rem;color:#999}#chat .text-area-item.left .content .card-box .card-info{overflow:hidden;width:100%;margin-top:.05rem;font-size:0}#chat .text-area-item.left .content .card-box .card-info img{width:.36rem;height:.36rem;border-radius:.36rem;float:left;margin-right:.05rem}#chat .text-area-item.left .content .card-box .card-info .info{float:right;overflow:hidden;width:calc(100% - .41rem)}#chat .text-area-item.left .content .card-box .card-info .info p{word-break:normal;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#chat .text-area-item.left .content .card-box .card-info .info p:first-child{font-size:.12rem;color:#999}#chat .text-area-item.left .content .card-box .card-info .info p:first-child span{color:#333;font-size:.14rem}#chat .text-area-item.left .content .card-box .card-info .info p:last-child{font-size:.14rem;color:#7dcbff}#chat .input-box{position:fixed;width:100%;left:0;bottom:0;height:.5rem;background:#f4f4f6;line-height:.5rem;border-top:1px solid #e9e9e9;box-shadow:0 -1px 0 0 #f4f4f6;-webkit-touch-callout:none;-moz-touch-callout:none;-ms-touch-callout:none;touch-callout:none}#chat .input-box .record{padding:0 .1rem;display:inline-block}#chat .record img{width:.25rem;vertical-align:middle}#chat .input-box div .plus{width:.3rem;height:.3rem;vertical-align:middle}#chat .input-box input{border:none;padding:0 .1rem;width:2.55rem;margin-left:.2rem}#chat .input-box button,#chat .input-box input{height:.4rem;vertical-align:middle;font-size:.14rem}#chat .input-box button{border:1px solid #e9e9e9;border-radius:5px;width:2.75rem;outline:none;background-color:transparent}#chat .input-box button.active{background-color:#dfdfdf}#chat .input-box .upload-img{padding-left:.1rem;display:inline-block}#chat .input-box .upload-img div{font-size:12px;display:inline-block;vertical-align:middle;color:#fff;height:.3rem;width:.4rem;background-color:#00a560;text-align:center;line-height:.3rem;border-radius:3px}#chat .input-box .no-click{position:absolute;width:100%;height:100%;background-color:transparent;top:0;left:0}#chat .record-modal{background:rgba(0,0,0,.4);width:100%;height:100%;left:0;top:0;position:fixed;z-index:12;display:none}#chat .record-modal.show{display:block}#chat .record-modal .content{width:1rem;height:1rem;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;background:#fff;width:2rem;height:2rem}#chat .loading-modal{position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(1,1,1,.1);text-align:center}#chat .loading-modal img{display:inline-block;width:1rem;height:1rem;position:absolute;margin-top:-.5rem;top:50%;margin-left:-.5rem;left:50%}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader?minimize!./node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5b03d85c\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vux-loader@1.1.23@vux-loader/src/after-less-loader.js!./node_modules/_less-loader@4.0.5@less-loader/dist/cjs.js!./node_modules/_vux-loader@1.1.23@vux-loader/src/style-loader.js!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./src/view/chat.vue\n// module id = 276\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/static-left.jpg?88f825891cdadbedb590581f5b9d8cb9\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/static-left.jpg\n// module id = 277\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/loading-left.gif?15150bde510b2a4aa5cfd47dcb5a3657\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/loading-left.gif\n// module id = 278\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/static-right.jpg?10b908cd3e9f484a1839983bc026de35\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/static-right.jpg\n// module id = 279\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/loading-right.gif?fbb643771c6c5524150b257d604c6c69\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/loading-right.gif\n// module id = 280\n// module chunks = 5","\nimport api from '../server'\n\n\nexport default {\ndata(){\nreturn {\nmyhead:'',\nchatList:[],\ninputText:'',\nservicedetailid:this.$route.params.servicedetailid,\nmsg:{},\ndefaultImg: 'this.src=\"' + require('../assets/icon_yizhu@2x.png') + '\"',//默认图片\nBASEIMGURL:api.BASEIMGURL,\nsend:false,\ncansend:true,\nsetint:''\n}\n},\ncreated(){\nif(this.$route.params.status == 2){//如果是历史隐藏掉聊天框\nthis.cansend = false;\n}\n},\nwatch:{\nchatList(){\nthis.$nextTick(function () {\nsetTimeout(function () {\nif($('.text-area-item').last().length){\n$('.text-area-item').last().get(0).scrollIntoView();\n}\n},400);\n})\n},\ninputText(){\nif(this.inputText.length>0){\nthis.send=true\n}else {\nthis.send = false;\n}\n}\n},\nmethods:{\ninputFocus(){ //解决input框被键盘遮挡\nlet _this=this;\nsetTimeout(function () {\nlet pannel =_this.$refs.inputBox;\npannel.scrollIntoView(true);\n},200);\n},\nsendmessage(e){\nvar _this = this;\n$(e.currentTarget).blur();\nif(!this.inputText.trim()){\nthis.$vux.toast.text('发送信息不能为空','top');\nreturn false\n}\nvar item = {\ncreateDate:new Date().getFullYear() + '-' +(new Date().getMonth()+1) + '-' + new Date().getDate(),\nurl:'src/assets/portrait@2x.png',\ncontent:this.inputText,\nsecondType:'4001',\nload:true\n};\nthis.chatList.push(item);\nvar obj={\n'oi':_this.servicedetailid,\n'msgType':'txt',\n'content':_this.inputText\n};\n_this.inputText = '';\napi.sendmsg(obj).then(res =>{\nif(res.code == '000'){\n_this.chatList[_this.chatList.length-1].load = false\n}\n})\n},\nuploadimg(){//模拟input file点击\n$('#upLoad').click();\n},\nupchange(e){//file改变事件\nvar _this = this;\nvar abc = new FormData();\nabc.append(\"content\", e.target.files[0]);\nabc.append('METHOD','uploadimage');\nabc.append('RECDATA',JSON.stringify({code:'chat'}));\nvar item = {\ncreateDate:new Date().getFullYear() + '-' +(new Date().getMonth()+1) + '-' + new Date().getDate(),\nurl:'src/assets/portrait@2x.png',\ncontent:'src/assets/loading.gif',\nsecondType:'4003',\n};\n_this.chatList.push(item);\napi.uploadimg(abc,function (res) {\nif(res.code === '000'){\nvar data = JSON.parse(res.data);\nvar url = data.urls[0];\nvar paname = data.pname[0];\nvar obj={\n'oi':_this.servicedetailid,\n'msgType':'img',\n'content':paname\n};\napi.sendmsg(obj).then(function (res) {\nif(res.code === '000'){\n_this.chatList[_this.chatList.length-1].content = url;\n}\n})\n}\n})\n},\nplayMp3(e){//播放语音\nvar _this = $(e.currentTarget);\nvar audio = $(e.currentTarget).next()[0];\naudio.play();\n_this.addClass('change');\naudio.onended = function () {\n_this.removeClass('change')\n};\n},\nmsgApi(){\nvar _this = this;\napi.getmsg({'oi':_this.servicedetailid}).then(res =>{\nif(res.code == '000'){\nif(JSON.parse(res.data).status>3){//会诊结束\n_this.$vux.alert.show({\ncontent:'您的会话已结束！'\n});\n_this.cansend = false;\nclearInterval(this.setint)\n}\n_this.msg = JSON.parse(res.data);\nvar chatData = _this.msg.list;\n\nchatData.sort(function (a,b) {\nreturn a.createDate - b.createDate\n});\nchatData.forEach(function (data) {\nvar time=data.createDate;\ndata.createDate=new Date(time).getFullYear()+'-'+(new Date(time).getMonth()+1)+'-'+new Date(time).getDate();\n});\n_this.chatList=chatData;\napi.getuserinfo({}).then(function (res) {\nif(res.code === '000'){\nvar data = JSON.parse(res.data);\n_this.myhead = data.userHead\n}\n})\n}\n})\n}\n},\nmounted(){\nconst _this = this;\nthis.$nextTick(function () {\nsetTimeout(function () {\nif($('.text-area-item').last().length){\n$('.text-area-item').last().get(0).scrollIntoView();\n}\n},400);\n});\n\nif(this.$store.state.phone && this.$store.state.token){\n_this.msgApi();\n_this.setint = setInterval(function () {\n_this.msgApi();\n},50000)\n}\n},\nbeforeDestroy(){//路由销毁\nclearInterval(this.setint)\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/view/chat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"chat\"}},[_c('div',{staticClass:\"chat-text-box\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"text-area-list\"},_vm._l((_vm.chatList),function(one,index){return _c('div',{staticClass:\"text-area-item\",class:{left:one.pusherName == _vm.msg.doctorName,right:one.pusherName !== _vm.msg.doctorName}},[_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(one.createDate))]),_vm._v(\" \"),_c('div',{staticClass:\"inner\"},[(one.pusherName==_vm.msg.doctorName)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.BASEIMGURL + one.headUrl,\"alt\":\"\",\"onerror\":_vm.defaultImg}}):_vm._e(),_vm._v(\" \"),(one.pusherName!=_vm.msg.doctorName)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.myhead,\"alt\":\"\",\"onerror\":_vm.defaultImg}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:((one.pusherName == _vm.msg.doctorName)),expression:\"(one.pusherName == msg.doctorName)\"}],staticClass:\"doc-name\"},[_vm._v(_vm._s(one.pusherName))]),_vm._v(\" \"),(one.secondType==='4001')?_c('div',{staticClass:\"content\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(one.load),expression:\"one.load\"}],staticStyle:{\"position\":\"absolute\",\"width\":\".3rem\",\"left\":\"-.3rem\",\"top\":\"0.04rem\"},attrs:{\"src\":require(\"../assets/loading.gif\")}}),_vm._v(\"\\n              \"+_vm._s(one.content)+\"\\n            \")]):_vm._e(),_vm._v(\" \"),(one.secondType==='4003')?_c('div',{staticClass:\"content\"},[_c('img',{staticStyle:{\"width\":\"1rem\"},attrs:{\"src\":one.content,\"alt\":\"error\"}})]):_vm._e(),_vm._v(\" \"),(one.secondType==='4002')?_c('div',{staticClass:\"content\",style:('width:'+one.duration/10+'rem')},[_c('span',{staticClass:\"duration\"},[_vm._v(_vm._s(one.duration))]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.playMp3($event)}}}),_vm._v(\" \"),_c('audio',{attrs:{\"src\":one.content}})]):_vm._e()])])])}))]),_vm._v(\" \"),_c('div',{staticClass:\"blank-block\"}),_vm._v(\" \"),(_vm.cansend)?_c('div',{staticClass:\"input-box\",attrs:{\"id\":\"inputBox\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputText),expression:\"inputText\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.inputText)},on:{\"focus\":_vm.inputFocus,\"input\":function($event){if($event.target.composing){ return; }_vm.inputText=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"upload-img\"},[_c('svg',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.send),expression:\"!send\"}],staticClass:\"vux-x-icon vux-x-icon-ios-plus-outline plus\",attrs:{\"type\":\"ios-plus-outline\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 512 512\"},on:{\"click\":_vm.uploadimg}},[_c('path',{attrs:{\"d\":\"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm0 398.7c-105.1 0-190.7-85.5-190.7-190.7S150.9 65.3 256 65.3 446.7 150.9 446.7 256 361.1 446.7 256 446.7z\"}}),_c('path',{attrs:{\"d\":\"M264.1 128h-16.8v119.9H128v16.8h119.3V384h16.8V264.7H384v-16.8H264.1z\"}})]),_vm._v(\" \"),_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"upLoad\"},on:{\"change\":function($event){_vm.upchange($event)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.send),expression:\"send\"}],on:{\"click\":_vm.sendmessage}},[_vm._v(\"发送\")])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"tips\"},[_vm._v(\"请描述病情，等待医生回复。\"),_c('br'),_vm._v(\"客服电话\"),_c('a',{attrs:{\"href\":\"tel:4001816106\"}},[_vm._v(\"400-181-6106\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-5b03d85c\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.1.23@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.1.23@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/view/chat.vue\n// module id = 282\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/loading.gif?ab5dccb6ad64570e49336400a399cef0\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/loading.gif\n// module id = 283\n// module chunks = 5"],"sourceRoot":""}