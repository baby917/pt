{"version":3,"sources":["webpack:///5.js","webpack:///./src/view/chat.vue?771b","webpack:///./src/assets/icon_yizhu@2x.png","webpack:///./node_modules/_vux@2.7.1@vux/src/tools/date/format.js","webpack:///./src/assets/loading.gif","webpack:///./src/view/chat.vue?6a63","webpack:///./src/view/chat.vue?1553","webpack:///./src/assets/static-left.jpg","webpack:///./src/assets/loading-left.gif","webpack:///./src/assets/static-right.jpg","webpack:///./src/assets/loading-right.gif","webpack:///./src/view/chat.vue","webpack:///./src/view/chat.vue?1b1d"],"names":["webpackJsonp","120","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vux_loader_1_1_23_vux_loader_src_script_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_script_index_0_chat_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_4f550308_hasScoped_false_buble_transforms_node_modules_vux_loader_1_1_23_vux_loader_src_before_template_compiler_loader_js_node_modules_vux_loader_1_1_23_vux_loader_src_template_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_template_index_0_chat_vue__","normalizeComponent","__vue_styles__","Component","125","exports","p","127","date","fmt","arguments","length","undefined","Date","replace","o","M+","getMonth","D+","getDate","h+","getHours","H+","m+","getMinutes","s+","getSeconds","q+","Math","floor","S","getMilliseconds","week","0","1","2","3","4","5","6","test","RegExp","$1","getFullYear","substr","getDay","k","173","277","content","i","locals","278","push","279","280","281","282","283","$","__WEBPACK_IMPORTED_MODULE_0__server__","__WEBPACK_IMPORTED_MODULE_1_vux_src_tools_date_format_js__","__WEBPACK_IMPORTED_MODULE_2_vuex__","n","_extends","assign","target","source","key","prototype","hasOwnProperty","call","data","myhead","chatList","inputText","servicedetailid","this","$route","params","msg","defaultImg","BASEIMGURL","send","cansend","setint","timerId","preimg","showpreimg","created","status","computed","token","state","watch","_this","$store","phone","msgApi","setInterval","$nextTick","setTimeout","last","get","scrollIntoView","methods","sendmessage","e","currentTarget","blur","trim","$vux","toast","text","item","createDate","url","secondType","load","obj","oi","msgType","sendmsg","then","res","code","uploadimg","click","upchange","abc","FormData","append","files","JSON","stringify","parse","urls","paname","pname","playMp3","audio","next","play","addClass","onended","removeClass","preview","hideview","goclinic","id","location","href","_this2","getmsg","alert","show","clearInterval","console","log","chatData","list","sort","a","b","forEach","time","getuserinfo","userHead","routername","fullPath","substring","encodeURIComponent","mounted","window","height","resize","beforeDestroy","284","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","_m","_v","_l","one","index","class","left","pusherId","doctorUserId","toString","right","_s","src","headUrl","alt","onerror","_e","directives","name","rawName","expression","pusherName","staticStyle","position","width","top","on","$event","duration","r","u","h","o1","o2","type","maxlength","domProps","input","composing","xmlns","viewBox","d","display","accept","change","staticRenderFns","esExports"],"mappings":"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","file":"5.js?c9bbce084be877043bd9","sourcesContent":["webpackJsonp([5],{\n\n/***/ 120:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vux_loader_1_1_23_vux_loader_src_script_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_script_index_0_chat_vue__ = __webpack_require__(283);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_4f550308_hasScoped_false_buble_transforms_node_modules_vux_loader_1_1_23_vux_loader_src_before_template_compiler_loader_js_node_modules_vux_loader_1_1_23_vux_loader_src_template_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_template_index_0_chat_vue__ = __webpack_require__(284);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(277)\n}\nvar normalizeComponent = __webpack_require__(1)\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vux_loader_1_1_23_vux_loader_src_script_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_script_index_0_chat_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_5_0_vue_loader_lib_template_compiler_index_id_data_v_4f550308_hasScoped_false_buble_transforms_node_modules_vux_loader_1_1_23_vux_loader_src_before_template_compiler_loader_js_node_modules_vux_loader_1_1_23_vux_loader_src_template_loader_js_node_modules_vue_loader_13_5_0_vue_loader_lib_selector_type_template_index_0_chat_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 125:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/icon_yizhu@2x.png?5517edf19dc71a40f55323ec201dfcfe\";\n\n/***/ }),\n\n/***/ 127:\n/***/ (function(module, exports) {\n\nmodule.exports = function (date) {\n  var fmt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'YYYY-MM-DD HH:mm:ss';\n\n  if (!date) {\n    return '';\n  }\n  if (typeof date === 'string') {\n    date = new Date(date.replace(/-/g, '/'));\n  }\n  if (typeof date === 'number') {\n    date = new Date(date);\n  }\n  var o = {\n    'M+': date.getMonth() + 1,\n    'D+': date.getDate(),\n    'h+': date.getHours() % 12 === 0 ? 12 : date.getHours() % 12,\n    'H+': date.getHours(),\n    'm+': date.getMinutes(),\n    's+': date.getSeconds(),\n    'q+': Math.floor((date.getMonth() + 3) / 3),\n    'S': date.getMilliseconds()\n  };\n  var week = {\n    '0': '\\u65E5',\n    '1': '\\u4E00',\n    '2': '\\u4E8C',\n    '3': '\\u4E09',\n    '4': '\\u56DB',\n    '5': '\\u4E94',\n    '6': '\\u516D'\n  };\n  if (/(Y+)/.test(fmt)) {\n    fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\n  }\n  if (/(E+)/.test(fmt)) {\n    fmt = fmt.replace(RegExp.$1, (RegExp.$1.length > 1 ? RegExp.$1.length > 2 ? '\\u661F\\u671F' : '\\u5468' : '') + week[date.getDay() + '']);\n  }\n  for (var k in o) {\n    if (new RegExp('(' + k + ')').test(fmt)) {\n      fmt = fmt.replace(RegExp.$1, RegExp.$1.length === 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length));\n    }\n  }\n  return fmt;\n};\n\n/***/ }),\n\n/***/ 173:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/loading.gif?ab5dccb6ad64570e49336400a399cef0\";\n\n/***/ }),\n\n/***/ 277:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(278);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(3)(\"182309e2\", content, true);\n\n/***/ }),\n\n/***/ 278:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(2)(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \"#chat{font-size:0;transition:opacity .2s ease;min-height:100%;background-color:#f6f6f6}#chat .blank-block{height:.5rem}#chat input:focus{outline:none;-webkit-appearance:none}#chat .chat-text-box{background:#f6f6f6;padding:.12rem}#chat .chat-text-box .tips{font-size:.14rem;color:#999;background:#ebebeb;text-align:center;padding:.1rem}#chat .chat-text-box .tips a{color:#00a560}#chat .text-area-item{font-size:.14rem;color:#fff;overflow:hidden;margin-bottom:.1rem;background-color:#f6f6f6}#chat .text-area-item .time{font-size:.12rem;color:#ccc;text-align:center;width:2.1rem;margin:.1rem auto;border-radius:.04rem;padding:.02rem 0}#chat .text-area-item .inner .content{max-width:2.6rem;min-width:.4rem;min-height:.4rem;margin:0 .1rem;border-radius:.04rem;padding:.1rem;box-sizing:border-box;word-break:break-all;text-align:justify;font-size:.16rem;color:#333}#chat .text-area-item.left .content{background-color:#fff;position:relative}#chat .text-area-item.left .content:before{content:\\\"\\\";display:inline-block;position:absolute;width:0;height:0;background-color:transparent;border:.08rem solid #fff;top:.12rem;border-left-color:transparent;border-top-color:transparent;border-bottom-color:transparent;left:-.14rem}#chat .text-area-item.right .content{background-color:#b0f5bf;position:relative}#chat .text-area-item.right .content:after{content:\\\"\\\";display:inline-block;position:absolute;width:0;height:0;background-color:transparent;border:.08rem solid #b0f5bf;right:-.14rem;top:.12rem;border-right-color:transparent;border-top-color:transparent;border-bottom-color:transparent}#chat .text-area-item .inner .avatar{width:.4rem;height:.4rem;border-radius:50%}#chat .text-area-item .doc-name{color:#666;padding-left:.1rem;font-size:.12rem}#chat .text-area-item.left .avatar,#chat .text-area-item.left .content{float:left}#chat .text-area-item .content button{display:inline-block;width:.16rem;height:.16rem;background-size:100% 100%;background-color:transparent;border:none;outline:none}#chat .text-area-item.left .content button{background-image:url(\" + __webpack_require__(279) + \")}#chat .text-area-item.left .content button.change{background-image:url(\" + __webpack_require__(280) + \")}#chat .text-area-item.right .content button{background-image:url(\" + __webpack_require__(281) + \")}#chat .text-area-item.right .content button.change{background-image:url(\" + __webpack_require__(282) + \")}#chat .text-area-item.right .content .duration{left:-.3rem}#chat .text-area-item.left .content .duration,#chat .text-area-item.right .content .duration{position:absolute;display:inline-block;width:.3rem;height:.3rem;top:.04rem;color:#999;font-size:.12rem;text-align:center;line-height:.3rem}#chat .text-area-item.left .content .duration{left:.5rem}#chat .text-area-item.left .box{float:left}#chat .text-area-item.right .avatar,#chat .text-area-item.right .box,#chat .text-area-item.right .content{float:right}#chat .text-area-item.left .content .card-box{border:2px solid #00a560;padding:.1rem;border-radius:4px;width:2rem;overflow:hidden}#chat .text-area-item.left .content .card-box .card-title{padding-bottom:.03rem;border-bottom:1px dashed #e9e9e9;text-align:right;font-size:.14rem;color:#999}#chat .text-area-item.left .content .card-box .card-info{overflow:hidden;width:100%;margin-top:.05rem;font-size:0}#chat .text-area-item.left .content .card-box .card-info img{width:.36rem;height:.36rem;border-radius:.36rem;float:left;margin-right:.05rem}#chat .text-area-item.left .content .card-box .card-info .info{float:right;overflow:hidden;width:calc(100% - .41rem)}#chat .text-area-item.left .content .card-box .card-info .info p{word-break:normal;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#chat .text-area-item.left .content .card-box .card-info .info p:first-child{font-size:.12rem;color:#999}#chat .text-area-item.left .content .card-box .card-info .info p:first-child span{color:#333;font-size:.14rem}#chat .text-area-item.left .content .card-box .card-info .info p:last-child{font-size:.14rem;color:#7dcbff}#chat .input-box{position:fixed;width:100%;left:0;bottom:0;height:.5rem;background:#f4f4f6;line-height:.5rem;border-top:1px solid #e9e9e9;box-shadow:0 -1px 0 0 #f4f4f6;-webkit-touch-callout:none;-moz-touch-callout:none;-ms-touch-callout:none;touch-callout:none}#chat .input-box .record{padding:0 .1rem;display:inline-block}#chat .record img{width:.25rem;vertical-align:middle}#chat .input-box div .plus{width:.3rem;height:.3rem;vertical-align:middle}#chat .input-box input{border:none;padding:0 .1rem;width:2.55rem;margin-left:.2rem}#chat .input-box button,#chat .input-box input{height:.4rem;vertical-align:middle;font-size:.14rem}#chat .input-box button{border:1px solid #e9e9e9;border-radius:5px;width:2.75rem;outline:none;background-color:transparent}#chat .input-box button.active{background-color:#dfdfdf}#chat .input-box .upload-img{padding-left:.1rem;display:inline-block}#chat .input-box .upload-img div{font-size:12px;display:inline-block;vertical-align:middle;color:#fff;height:.3rem;width:.4rem;background-color:#00a560;text-align:center;line-height:.3rem;border-radius:3px}#chat .input-box .no-click{position:absolute;width:100%;height:100%;background-color:transparent;top:0;left:0}#chat .record-modal{background:rgba(0,0,0,.4);width:100%;height:100%;left:0;top:0;position:fixed;z-index:12;display:none}#chat .record-modal.show{display:block}#chat .record-modal .content{width:1rem;height:1rem;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;background:#fff;width:2rem;height:2rem}#chat .loading-modal{position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(1,1,1,.1);text-align:center}#chat .loading-modal img{display:inline-block;width:1rem;height:1rem;position:absolute;margin-top:-.5rem;top:50%;margin-left:-.5rem;left:50%}#chat .preview-img{position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(1,1,1,.2);z-index:1000;text-align:center;vertical-align:middle}#chat .preview-img img{vertical-align:middle;width:80%}#chat .preview-img span{display:inline-block;height:100%;vertical-align:middle}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 279:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/static-left.jpg?88f825891cdadbedb590581f5b9d8cb9\";\n\n/***/ }),\n\n/***/ 280:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/loading-left.gif?15150bde510b2a4aa5cfd47dcb5a3657\";\n\n/***/ }),\n\n/***/ 281:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/static-right.jpg?10b908cd3e9f484a1839983bc026de35\";\n\n/***/ }),\n\n/***/ 282:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/loading-right.gif?fbb643771c6c5524150b257d604c6c69\";\n\n/***/ }),\n\n/***/ 283:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__server__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vux_src_tools_date_format_js__ = __webpack_require__(127);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vux_src_tools_date_format_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_vux_src_tools_date_format_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vuex__ = __webpack_require__(21);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      myhead: '',\n      chatList: [],\n      inputText: '',\n      servicedetailid: this.$route.params.servicedetailid,\n      msg: {},\n      defaultImg: 'this.src=\"' + __webpack_require__(125) + '\"', //默认图片\n      BASEIMGURL: __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].BASEIMGURL,\n      send: false,\n      cansend: true,\n      setint: '',\n      timerId: null,\n      preimg: '',\n      showpreimg: false\n    };\n  },\n  created: function created() {\n    if (this.$route.params.status == 2) {\n      //如果是历史隐藏掉聊天框\n      this.cansend = false;\n    }\n  },\n\n  computed: _extends({}, Object(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"b\" /* mapState */])({\n    token: function token(state) {\n      return state.token;\n    }\n  })),\n  watch: {\n    token: function token() {\n      var _this = this;\n      if (this.$store.state.phone && this.$store.state.token) {\n        _this.msgApi();\n        _this.setint = setInterval(function () {\n          _this.msgApi();\n        }, 50000);\n      }\n    },\n    chatList: function chatList() {\n      this.$nextTick(function () {\n        setTimeout(function () {\n          if ($('.text-area-item').last().length) {\n            $('.text-area-item').last().get(0).scrollIntoView();\n          }\n        }, 400);\n      });\n    },\n    inputText: function inputText() {\n      if (this.inputText.length > 0) {\n        this.send = true;\n      } else {\n        this.send = false;\n      }\n    }\n  },\n  methods: {\n    sendmessage: function sendmessage(e) {\n      var _this = this;\n      $(e.currentTarget).blur();\n      if (!this.inputText.trim()) {\n        this.$vux.toast.text('发送信息不能为空', 'top');\n        return false;\n      }\n      var item = {\n        createDate: new Date().getFullYear() + '-' + (new Date().getMonth() + 1) + '-' + new Date().getDate(),\n        url: this.myhead,\n        content: this.inputText,\n        secondType: '4001',\n        load: true\n      };\n      this.chatList.push(item);\n      var obj = {\n        'oi': _this.servicedetailid,\n        'msgType': 'txt',\n        'content': _this.inputText\n      };\n      _this.inputText = '';\n      __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].sendmsg(obj).then(function (res) {\n        if (res.code == '000') {\n          _this.chatList[_this.chatList.length - 1].load = false;\n        }\n      });\n    },\n    uploadimg: function uploadimg() {\n      //模拟input file点击\n      $('#upLoad').click();\n    },\n    upchange: function upchange(e) {\n      //file改变事件\n      var _this = this;\n      var abc = new FormData();\n      abc.append(\"content\", e.target.files[0]);\n      abc.append('METHOD', 'uploadimage');\n      abc.append('RECDATA', JSON.stringify({ code: 'chat' }));\n      var item = {\n        createDate: new Date().getFullYear() + '-' + (new Date().getMonth() + 1) + '-' + new Date().getDate(),\n        url: this.myhead,\n        content: __webpack_require__(173),\n        secondType: '4003'\n      };\n      _this.chatList.push(item);\n      __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].uploadimg(abc, function (res) {\n        if (res.code === '000') {\n          var data = JSON.parse(res.data);\n          var url = data.urls[0];\n          var paname = data.pname[0];\n          var obj = {\n            'oi': _this.servicedetailid,\n            'msgType': 'img',\n            'content': paname\n          };\n          __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].sendmsg(obj).then(function (res) {\n            if (res.code === '000') {\n              _this.chatList[_this.chatList.length - 1].content = url;\n            }\n          });\n        }\n      });\n    },\n    playMp3: function playMp3(e) {\n      //播放语音\n      var _this = $(e.currentTarget);\n      var audio = $(e.currentTarget).next()[0];\n      audio.play();\n      _this.addClass('change');\n      audio.onended = function () {\n        _this.removeClass('change');\n      };\n    },\n    preview: function preview(url) {\n      //预览图片\n      this.preimg = url;\n      this.showpreimg = true;\n    },\n    hideview: function hideview() {\n      //隐藏预览图片\n      this.preimg = '';\n      this.showpreimg = false;\n    },\n    goclinic: function goclinic(id) {\n      //名片跳去微诊所\n      location.href = '#/clinic/' + id;\n    },\n    msgApi: function msgApi() {\n      var _this2 = this;\n\n      var _this = this;\n      __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].getmsg({ 'oi': _this.servicedetailid }).then(function (res) {\n        if (res.code == '000') {\n          if (JSON.parse(res.data).status > 3) {\n            //会诊结束\n            _this.$vux.alert.show({\n              content: '您的会话已结束！'\n            });\n            _this.cansend = false;\n            clearInterval(_this2.setint);\n          }\n          _this.msg = JSON.parse(res.data);\n          console.log(JSON.parse(res.data));\n          var chatData = _this.msg.list;\n\n          chatData.sort(function (a, b) {\n            return a.createDate - b.createDate;\n          });\n          chatData.forEach(function (data) {\n            var time = data.createDate;\n            data.createDate = new Date(time).getFullYear() + '-' + (new Date(time).getMonth() + 1) + '-' + new Date(time).getDate();\n          });\n          _this.chatList = chatData;\n          __WEBPACK_IMPORTED_MODULE_0__server__[\"a\" /* default */].getuserinfo({}).then(function (res) {\n            if (res.code === '000') {\n              var data = JSON.parse(res.data);\n              _this.myhead = data.userHead;\n            }\n          });\n        } else if (res.code === '10007') {\n          var routername = _this2.$route.fullPath.substring(1, _this2.$route.fullPath.length);\n          location.href = '#/login/' + encodeURIComponent(routername);\n          return false;\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    var h = $(window).height();\n    $(window).resize(function () {\n      if ($(window).height() < h) {}\n      if ($(window).height() >= h) {}\n    });\n    this.$nextTick(function () {\n      setTimeout(function () {\n        if ($('.text-area-item').last().length) {\n          $('.text-area-item').last().get(0).scrollIntoView();\n        }\n      }, 400);\n    });\n\n    if (this.$store.state.phone && this.$store.state.token) {\n      _this.msgApi();\n      _this.setint = setInterval(function () {\n        _this.msgApi();\n      }, 50000);\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    //路由销毁\n    clearInterval(this.setint);\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(8)))\n\n/***/ }),\n\n/***/ 284:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"chat\"}},[_c('div',{staticClass:\"chat-text-box\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"text-area-list\"},_vm._l((_vm.chatList),function(one,index){return _c('div',{staticClass:\"text-area-item\",class:{left:one.pusherId == _vm.msg.doctorUserId.toString(),right:one.pusherId !== _vm.msg.doctorUserId.toString()}},[_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(one.createDate))]),_vm._v(\" \"),_c('div',{staticClass:\"inner\"},[(one.pusherId==_vm.msg.doctorUserId.toString())?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.BASEIMGURL + one.headUrl,\"alt\":\"\",\"onerror\":_vm.defaultImg}}):_vm._e(),_vm._v(\" \"),(one.pusherId!=_vm.msg.doctorUserId.toString())?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.myhead,\"alt\":\"\",\"onerror\":_vm.defaultImg}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:((one.pusherId == _vm.msg.doctorUserId.toString())),expression:\"(one.pusherId == msg.doctorUserId.toString())\"}],staticClass:\"doc-name\"},[_vm._v(_vm._s(one.pusherName))]),_vm._v(\" \"),(one.secondType==='4001')?_c('div',{staticClass:\"content\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(one.load),expression:\"one.load\"}],staticStyle:{\"position\":\"absolute\",\"width\":\".3rem\",\"left\":\"-.3rem\",\"top\":\"0.04rem\"},attrs:{\"src\":__webpack_require__(173)}}),_vm._v(\"\\n              \"+_vm._s(one.content)+\"\\n            \")]):_vm._e(),_vm._v(\" \"),(one.secondType==='4005')?_c('div',{staticClass:\"content\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(one.load),expression:\"one.load\"}],staticStyle:{\"position\":\"absolute\",\"width\":\".3rem\",\"left\":\"-.3rem\",\"top\":\"0.04rem\"},attrs:{\"src\":__webpack_require__(173)}}),_vm._v(\" \"),_c('span',[_vm._v(\"[视频，请到乐乐医APP上查看]\")])]):_vm._e(),_vm._v(\" \"),(one.secondType==='4003')?_c('div',{staticClass:\"content\"},[_c('img',{staticStyle:{\"width\":\"1rem\"},attrs:{\"src\":one.content,\"alt\":\"error\"},on:{\"click\":function($event){_vm.preview(one.content)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showpreimg),expression:\"showpreimg\"}],staticClass:\"preview-img\",on:{\"click\":function($event){_vm.hideview()}}},[_c('img',{attrs:{\"src\":_vm.preimg}}),_vm._v(\" \"),_c('span')])]):_vm._e(),_vm._v(\" \"),(one.secondType==='4002')?_c('div',{staticClass:\"content\"},[_c('span',{staticClass:\"duration\"},[_vm._v(_vm._s(one.duration))]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.playMp3($event)}}}),_vm._v(\" \"),_c('audio',{attrs:{\"src\":one.content}})]):_vm._e(),_vm._v(\" \"),(one.secondType==='4007')?_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"card-box\",on:{\"click\":function($event){_vm.goclinic(JSON.parse(one.content).r)}}},[_c('p',{staticClass:\"card-title\"},[_vm._v(\"名片\")]),_vm._v(\" \"),_c('div',{staticClass:\"card-info\"},[_c('img',{attrs:{\"src\":_vm.BASEIMGURL+JSON.parse(one.content).u}}),_vm._v(\" \"),_c('div',{staticClass:\"info\"},[_c('p',[_c('span',[_vm._v(_vm._s(JSON.parse(one.content).n))]),_vm._v(\" \"+_vm._s(JSON.parse(one.content).h))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(JSON.parse(one.content).o1)+\" \"+_vm._s(JSON.parse(one.content).o2))])])])])]):_vm._e()])])])}))]),_vm._v(\" \"),_c('div',{staticClass:\"blank-block\"}),_vm._v(\" \"),(_vm.cansend)?_c('div',{staticClass:\"input-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputText),expression:\"inputText\"}],attrs:{\"type\":\"text\",\"id\":\"inputBox\",\"maxlength\":\"1000\"},domProps:{\"value\":(_vm.inputText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputText=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"upload-img\"},[_c('svg',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.send),expression:\"!send\"}],staticClass:\"vux-x-icon vux-x-icon-ios-plus-outline plus\",attrs:{\"type\":\"ios-plus-outline\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 512 512\"},on:{\"click\":_vm.uploadimg}},[_c('path',{attrs:{\"d\":\"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm0 398.7c-105.1 0-190.7-85.5-190.7-190.7S150.9 65.3 256 65.3 446.7 150.9 446.7 256 361.1 446.7 256 446.7z\"}}),_c('path',{attrs:{\"d\":\"M264.1 128h-16.8v119.9H128v16.8h119.3V384h16.8V264.7H384v-16.8H264.1z\"}})]),_vm._v(\" \"),_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"upLoad\",\"accept\":\"image/*\"},on:{\"change\":function($event){_vm.upchange($event)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.send),expression:\"send\"}],on:{\"click\":_vm.sendmessage}},[_vm._v(\"发送\")])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"tips\"},[_vm._v(\"请描述病情，等待医生回复。\"),_c('br'),_vm._v(\"客服电话\"),_c('a',{attrs:{\"href\":\"tel:4001816106\"}},[_vm._v(\"400-181-6106\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 5.js?c9bbce084be877043bd9","function injectStyle (ssrContext) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4f550308\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vux-loader@1.1.23@vux-loader/src/after-less-loader.js!less-loader!../../node_modules/_vux-loader@1.1.23@vux-loader/src/style-loader.js!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=styles&index=0!./chat.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vux-loader@1.1.23@vux-loader/src/script-loader.js!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=script&index=0!./chat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4f550308\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vux-loader@1.1.23@vux-loader/src/before-template-compiler-loader.js!../../node_modules/_vux-loader@1.1.23@vux-loader/src/template-loader.js!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector?type=template&index=0!./chat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/chat.vue\n// module id = 120\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/icon_yizhu@2x.png?5517edf19dc71a40f55323ec201dfcfe\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/icon_yizhu@2x.png\n// module id = 125\n// module chunks = 2 3 5 6 8 11 13","module.exports = function (date, fmt = 'YYYY-MM-DD HH:mm:ss') {\r\n  if (!date) {\r\n    return ''\r\n  }\r\n  if (typeof date === 'string') {\r\n    date = new Date(date.replace(/-/g, '/'))\r\n  }\r\n  if (typeof date === 'number') {\r\n    date = new Date(date)\r\n  }\r\n  var o = {\r\n    'M+': date.getMonth() + 1,\r\n    'D+': date.getDate(),\r\n    'h+': date.getHours() % 12 === 0 ? 12 : date.getHours() % 12,\r\n    'H+': date.getHours(),\r\n    'm+': date.getMinutes(),\r\n    's+': date.getSeconds(),\r\n    'q+': Math.floor((date.getMonth() + 3) / 3),\r\n    'S': date.getMilliseconds()\r\n  }\r\n  var week = {\r\n    '0': '\\u65e5',\r\n    '1': '\\u4e00',\r\n    '2': '\\u4e8c',\r\n    '3': '\\u4e09',\r\n    '4': '\\u56db',\r\n    '5': '\\u4e94',\r\n    '6': '\\u516d'\r\n  }\r\n  if (/(Y+)/.test(fmt)) {\r\n    fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length))\r\n  }\r\n  if (/(E+)/.test(fmt)) {\r\n    fmt = fmt.replace(RegExp.$1, ((RegExp.$1.length > 1) ? (RegExp.$1.length > 2 ? '\\u661f\\u671f' : '\\u5468') : '') + week[date.getDay() + ''])\r\n  }\r\n  for (var k in o) {\r\n    if (new RegExp('(' + k + ')').test(fmt)) {\r\n      fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : (('00' + o[k]).substr(('' + o[k]).length)))\r\n    }\r\n  }\r\n  return fmt\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_vux@2.7.1@vux/src/tools/date/format.js","module.exports = __webpack_public_path__ + \"img/loading.gif?ab5dccb6ad64570e49336400a399cef0\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/loading.gif\n// module id = 173\n// module chunks = 5","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.7@css-loader/index.js?minimize!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4f550308\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vux-loader@1.1.23@vux-loader/src/after-less-loader.js!../../node_modules/_less-loader@4.0.5@less-loader/dist/cjs.js!../../node_modules/_vux-loader@1.1.23@vux-loader/src/style-loader.js!../../node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./chat.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@3.0.3@vue-style-loader/lib/addStylesClient.js\")(\"182309e2\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-style-loader@3.0.3@vue-style-loader!./node_modules/_css-loader@0.28.7@css-loader?minimize!./node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4f550308\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vux-loader@1.1.23@vux-loader/src/after-less-loader.js!./node_modules/_less-loader@4.0.5@less-loader/dist/cjs.js!./node_modules/_vux-loader@1.1.23@vux-loader/src/style-loader.js!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./src/view/chat.vue\n// module id = 277\n// module chunks = 5","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"#chat{font-size:0;transition:opacity .2s ease;min-height:100%;background-color:#f6f6f6}#chat .blank-block{height:.5rem}#chat input:focus{outline:none;-webkit-appearance:none}#chat .chat-text-box{background:#f6f6f6;padding:.12rem}#chat .chat-text-box .tips{font-size:.14rem;color:#999;background:#ebebeb;text-align:center;padding:.1rem}#chat .chat-text-box .tips a{color:#00a560}#chat .text-area-item{font-size:.14rem;color:#fff;overflow:hidden;margin-bottom:.1rem;background-color:#f6f6f6}#chat .text-area-item .time{font-size:.12rem;color:#ccc;text-align:center;width:2.1rem;margin:.1rem auto;border-radius:.04rem;padding:.02rem 0}#chat .text-area-item .inner .content{max-width:2.6rem;min-width:.4rem;min-height:.4rem;margin:0 .1rem;border-radius:.04rem;padding:.1rem;box-sizing:border-box;word-break:break-all;text-align:justify;font-size:.16rem;color:#333}#chat .text-area-item.left .content{background-color:#fff;position:relative}#chat .text-area-item.left .content:before{content:\\\"\\\";display:inline-block;position:absolute;width:0;height:0;background-color:transparent;border:.08rem solid #fff;top:.12rem;border-left-color:transparent;border-top-color:transparent;border-bottom-color:transparent;left:-.14rem}#chat .text-area-item.right .content{background-color:#b0f5bf;position:relative}#chat .text-area-item.right .content:after{content:\\\"\\\";display:inline-block;position:absolute;width:0;height:0;background-color:transparent;border:.08rem solid #b0f5bf;right:-.14rem;top:.12rem;border-right-color:transparent;border-top-color:transparent;border-bottom-color:transparent}#chat .text-area-item .inner .avatar{width:.4rem;height:.4rem;border-radius:50%}#chat .text-area-item .doc-name{color:#666;padding-left:.1rem;font-size:.12rem}#chat .text-area-item.left .avatar,#chat .text-area-item.left .content{float:left}#chat .text-area-item .content button{display:inline-block;width:.16rem;height:.16rem;background-size:100% 100%;background-color:transparent;border:none;outline:none}#chat .text-area-item.left .content button{background-image:url(\" + require(\"../assets/static-left.jpg\") + \")}#chat .text-area-item.left .content button.change{background-image:url(\" + require(\"../assets/loading-left.gif\") + \")}#chat .text-area-item.right .content button{background-image:url(\" + require(\"../assets/static-right.jpg\") + \")}#chat .text-area-item.right .content button.change{background-image:url(\" + require(\"../assets/loading-right.gif\") + \")}#chat .text-area-item.right .content .duration{left:-.3rem}#chat .text-area-item.left .content .duration,#chat .text-area-item.right .content .duration{position:absolute;display:inline-block;width:.3rem;height:.3rem;top:.04rem;color:#999;font-size:.12rem;text-align:center;line-height:.3rem}#chat .text-area-item.left .content .duration{left:.5rem}#chat .text-area-item.left .box{float:left}#chat .text-area-item.right .avatar,#chat .text-area-item.right .box,#chat .text-area-item.right .content{float:right}#chat .text-area-item.left .content .card-box{border:2px solid #00a560;padding:.1rem;border-radius:4px;width:2rem;overflow:hidden}#chat .text-area-item.left .content .card-box .card-title{padding-bottom:.03rem;border-bottom:1px dashed #e9e9e9;text-align:right;font-size:.14rem;color:#999}#chat .text-area-item.left .content .card-box .card-info{overflow:hidden;width:100%;margin-top:.05rem;font-size:0}#chat .text-area-item.left .content .card-box .card-info img{width:.36rem;height:.36rem;border-radius:.36rem;float:left;margin-right:.05rem}#chat .text-area-item.left .content .card-box .card-info .info{float:right;overflow:hidden;width:calc(100% - .41rem)}#chat .text-area-item.left .content .card-box .card-info .info p{word-break:normal;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}#chat .text-area-item.left .content .card-box .card-info .info p:first-child{font-size:.12rem;color:#999}#chat .text-area-item.left .content .card-box .card-info .info p:first-child span{color:#333;font-size:.14rem}#chat .text-area-item.left .content .card-box .card-info .info p:last-child{font-size:.14rem;color:#7dcbff}#chat .input-box{position:fixed;width:100%;left:0;bottom:0;height:.5rem;background:#f4f4f6;line-height:.5rem;border-top:1px solid #e9e9e9;box-shadow:0 -1px 0 0 #f4f4f6;-webkit-touch-callout:none;-moz-touch-callout:none;-ms-touch-callout:none;touch-callout:none}#chat .input-box .record{padding:0 .1rem;display:inline-block}#chat .record img{width:.25rem;vertical-align:middle}#chat .input-box div .plus{width:.3rem;height:.3rem;vertical-align:middle}#chat .input-box input{border:none;padding:0 .1rem;width:2.55rem;margin-left:.2rem}#chat .input-box button,#chat .input-box input{height:.4rem;vertical-align:middle;font-size:.14rem}#chat .input-box button{border:1px solid #e9e9e9;border-radius:5px;width:2.75rem;outline:none;background-color:transparent}#chat .input-box button.active{background-color:#dfdfdf}#chat .input-box .upload-img{padding-left:.1rem;display:inline-block}#chat .input-box .upload-img div{font-size:12px;display:inline-block;vertical-align:middle;color:#fff;height:.3rem;width:.4rem;background-color:#00a560;text-align:center;line-height:.3rem;border-radius:3px}#chat .input-box .no-click{position:absolute;width:100%;height:100%;background-color:transparent;top:0;left:0}#chat .record-modal{background:rgba(0,0,0,.4);width:100%;height:100%;left:0;top:0;position:fixed;z-index:12;display:none}#chat .record-modal.show{display:block}#chat .record-modal .content{width:1rem;height:1rem;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;background:#fff;width:2rem;height:2rem}#chat .loading-modal{position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(1,1,1,.1);text-align:center}#chat .loading-modal img{display:inline-block;width:1rem;height:1rem;position:absolute;margin-top:-.5rem;top:50%;margin-left:-.5rem;left:50%}#chat .preview-img{position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(1,1,1,.2);z-index:1000;text-align:center;vertical-align:middle}#chat .preview-img img{vertical-align:middle;width:80%}#chat .preview-img span{display:inline-block;height:100%;vertical-align:middle}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.7@css-loader?minimize!./node_modules/_vue-loader@13.5.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4f550308\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/_vux-loader@1.1.23@vux-loader/src/after-less-loader.js!./node_modules/_less-loader@4.0.5@less-loader/dist/cjs.js!./node_modules/_vux-loader@1.1.23@vux-loader/src/style-loader.js!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=styles&index=0!./src/view/chat.vue\n// module id = 278\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/static-left.jpg?88f825891cdadbedb590581f5b9d8cb9\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/static-left.jpg\n// module id = 279\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/loading-left.gif?15150bde510b2a4aa5cfd47dcb5a3657\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/loading-left.gif\n// module id = 280\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/static-right.jpg?10b908cd3e9f484a1839983bc026de35\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/static-right.jpg\n// module id = 281\n// module chunks = 5","module.exports = __webpack_public_path__ + \"img/loading-right.gif?fbb643771c6c5524150b257d604c6c69\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/loading-right.gif\n// module id = 282\n// module chunks = 5","\nimport api from '../server'\nimport dateFormat from 'vux/src/tools/date/format.js'\n\nimport { mapState } from 'vuex'\nexport default {\ndata(){\nreturn {\nmyhead:'',\nchatList:[],\ninputText:'',\nservicedetailid:this.$route.params.servicedetailid,\nmsg:{},\ndefaultImg: 'this.src=\"' + require('../assets/icon_yizhu@2x.png') + '\"',//默认图片\nBASEIMGURL:api.BASEIMGURL,\nsend:false,\ncansend:true,\nsetint:'',\ntimerId : null,\npreimg:'',\nshowpreimg:false\n}\n},\ncreated(){\nif(this.$route.params.status == 2){//如果是历史隐藏掉聊天框\nthis.cansend = false;\n}\n},\ncomputed:{\n...mapState({\ntoken:state=>state.token\n}),\n},\nwatch:{\ntoken(){\nvar _this = this;\nif(this.$store.state.phone && this.$store.state.token){\n_this.msgApi();\n_this.setint = setInterval(function () {\n_this.msgApi();\n},50000)\n}\n},\nchatList(){\nthis.$nextTick(function () {\nsetTimeout(function () {\nif($('.text-area-item').last().length){\n$('.text-area-item').last().get(0).scrollIntoView();\n}\n},400);\n})\n},\ninputText(){\nif(this.inputText.length>0){\nthis.send=true\n}else {\nthis.send = false;\n}\n}\n},\nmethods:{\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nsendmessage(e){\nvar _this = this;\n$(e.currentTarget).blur();\nif(!this.inputText.trim()){\nthis.$vux.toast.text('发送信息不能为空','top');\nreturn false\n}\nvar item = {\ncreateDate:new Date().getFullYear() + '-' +(new Date().getMonth()+1) + '-' + new Date().getDate(),\nurl:this.myhead,\ncontent:this.inputText,\nsecondType:'4001',\nload:true\n};\nthis.chatList.push(item);\nvar obj={\n'oi':_this.servicedetailid,\n'msgType':'txt',\n'content':_this.inputText\n};\n_this.inputText = '';\napi.sendmsg(obj).then(res =>{\nif(res.code == '000'){\n_this.chatList[_this.chatList.length-1].load = false\n}\n})\n},\nuploadimg(){//模拟input file点击\n$('#upLoad').click();\n},\nupchange(e){//file改变事件\nvar _this = this;\nvar abc = new FormData();\nabc.append(\"content\", e.target.files[0]);\nabc.append('METHOD','uploadimage');\nabc.append('RECDATA',JSON.stringify({code:'chat'}));\nvar item = {\ncreateDate:new Date().getFullYear() + '-' +(new Date().getMonth()+1) + '-' + new Date().getDate(),\nurl:this.myhead,\ncontent:require('../assets/loading.gif'),\nsecondType:'4003',\n};\n_this.chatList.push(item);\napi.uploadimg(abc,function (res) {\nif(res.code === '000'){\nvar data = JSON.parse(res.data);\nvar url = data.urls[0];\nvar paname = data.pname[0];\nvar obj={\n'oi':_this.servicedetailid,\n'msgType':'img',\n'content':paname\n};\napi.sendmsg(obj).then(function (res) {\nif(res.code === '000'){\n_this.chatList[_this.chatList.length-1].content = url;\n}\n})\n}\n})\n},\nplayMp3(e){//播放语音\nvar _this = $(e.currentTarget);\nvar audio = $(e.currentTarget).next()[0];\naudio.play();\n_this.addClass('change');\naudio.onended = function () {\n_this.removeClass('change')\n};\n},\npreview(url){//预览图片\nthis.preimg = url;\nthis.showpreimg = true;\n},\nhideview(){//隐藏预览图片\nthis.preimg = '';\nthis.showpreimg = false;\n},\ngoclinic(id){//名片跳去微诊所\nlocation.href='#/clinic/'+id\n},\nmsgApi(){\nvar _this = this;\napi.getmsg({'oi':_this.servicedetailid}).then(res =>{\nif(res.code == '000'){\nif(JSON.parse(res.data).status>3){//会诊结束\n_this.$vux.alert.show({\ncontent:'您的会话已结束！'\n});\n_this.cansend = false;\nclearInterval(this.setint)\n}\n_this.msg = JSON.parse(res.data);\nconsole.log(JSON.parse(res.data));\nvar chatData = _this.msg.list;\n\nchatData.sort(function (a,b) {\nreturn a.createDate - b.createDate\n});\nchatData.forEach(function (data) {\nvar time=data.createDate;\ndata.createDate=new Date(time).getFullYear()+'-'+(new Date(time).getMonth()+1)+'-'+new Date(time).getDate();\n});\n_this.chatList=chatData;\napi.getuserinfo({}).then(function (res) {\nif(res.code === '000'){\nvar data = JSON.parse(res.data);\n_this.myhead = data.userHead\n}\n})\n}else if(res.code === '10007'){\nvar routername = this.$route.fullPath.substring(1,this.$route.fullPath.length);\nlocation.href = '#/login/'+encodeURIComponent(routername);\nreturn false;\n}\n})\n}\n},\nmounted(){\nconst _this = this;\n\nvar h=$(window).height();\n$(window).resize(function() {\nif($(window).height()<h){\n\n}\nif($(window).height()>=h){\n\n}\n});\nthis.$nextTick(function () {\nsetTimeout(function () {\nif($('.text-area-item').last().length){\n$('.text-area-item').last().get(0).scrollIntoView();\n}\n},400);\n});\n\nif(this.$store.state.phone && this.$store.state.token){\n_this.msgApi();\n_this.setint = setInterval(function () {\n_this.msgApi();\n},50000)\n}\n},\nbeforeDestroy(){//路由销毁\nclearInterval(this.setint)\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/view/chat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"chat\"}},[_c('div',{staticClass:\"chat-text-box\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"text-area-list\"},_vm._l((_vm.chatList),function(one,index){return _c('div',{staticClass:\"text-area-item\",class:{left:one.pusherId == _vm.msg.doctorUserId.toString(),right:one.pusherId !== _vm.msg.doctorUserId.toString()}},[_c('p',{staticClass:\"time\"},[_vm._v(_vm._s(one.createDate))]),_vm._v(\" \"),_c('div',{staticClass:\"inner\"},[(one.pusherId==_vm.msg.doctorUserId.toString())?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.BASEIMGURL + one.headUrl,\"alt\":\"\",\"onerror\":_vm.defaultImg}}):_vm._e(),_vm._v(\" \"),(one.pusherId!=_vm.msg.doctorUserId.toString())?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.myhead,\"alt\":\"\",\"onerror\":_vm.defaultImg}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:((one.pusherId == _vm.msg.doctorUserId.toString())),expression:\"(one.pusherId == msg.doctorUserId.toString())\"}],staticClass:\"doc-name\"},[_vm._v(_vm._s(one.pusherName))]),_vm._v(\" \"),(one.secondType==='4001')?_c('div',{staticClass:\"content\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(one.load),expression:\"one.load\"}],staticStyle:{\"position\":\"absolute\",\"width\":\".3rem\",\"left\":\"-.3rem\",\"top\":\"0.04rem\"},attrs:{\"src\":require(\"../assets/loading.gif\")}}),_vm._v(\"\\n              \"+_vm._s(one.content)+\"\\n            \")]):_vm._e(),_vm._v(\" \"),(one.secondType==='4005')?_c('div',{staticClass:\"content\"},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(one.load),expression:\"one.load\"}],staticStyle:{\"position\":\"absolute\",\"width\":\".3rem\",\"left\":\"-.3rem\",\"top\":\"0.04rem\"},attrs:{\"src\":require(\"../assets/loading.gif\")}}),_vm._v(\" \"),_c('span',[_vm._v(\"[视频，请到乐乐医APP上查看]\")])]):_vm._e(),_vm._v(\" \"),(one.secondType==='4003')?_c('div',{staticClass:\"content\"},[_c('img',{staticStyle:{\"width\":\"1rem\"},attrs:{\"src\":one.content,\"alt\":\"error\"},on:{\"click\":function($event){_vm.preview(one.content)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showpreimg),expression:\"showpreimg\"}],staticClass:\"preview-img\",on:{\"click\":function($event){_vm.hideview()}}},[_c('img',{attrs:{\"src\":_vm.preimg}}),_vm._v(\" \"),_c('span')])]):_vm._e(),_vm._v(\" \"),(one.secondType==='4002')?_c('div',{staticClass:\"content\"},[_c('span',{staticClass:\"duration\"},[_vm._v(_vm._s(one.duration))]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.playMp3($event)}}}),_vm._v(\" \"),_c('audio',{attrs:{\"src\":one.content}})]):_vm._e(),_vm._v(\" \"),(one.secondType==='4007')?_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"card-box\",on:{\"click\":function($event){_vm.goclinic(JSON.parse(one.content).r)}}},[_c('p',{staticClass:\"card-title\"},[_vm._v(\"名片\")]),_vm._v(\" \"),_c('div',{staticClass:\"card-info\"},[_c('img',{attrs:{\"src\":_vm.BASEIMGURL+JSON.parse(one.content).u}}),_vm._v(\" \"),_c('div',{staticClass:\"info\"},[_c('p',[_c('span',[_vm._v(_vm._s(JSON.parse(one.content).n))]),_vm._v(\" \"+_vm._s(JSON.parse(one.content).h))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(JSON.parse(one.content).o1)+\" \"+_vm._s(JSON.parse(one.content).o2))])])])])]):_vm._e()])])])}))]),_vm._v(\" \"),_c('div',{staticClass:\"blank-block\"}),_vm._v(\" \"),(_vm.cansend)?_c('div',{staticClass:\"input-box\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inputText),expression:\"inputText\"}],attrs:{\"type\":\"text\",\"id\":\"inputBox\",\"maxlength\":\"1000\"},domProps:{\"value\":(_vm.inputText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inputText=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"upload-img\"},[_c('svg',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.send),expression:\"!send\"}],staticClass:\"vux-x-icon vux-x-icon-ios-plus-outline plus\",attrs:{\"type\":\"ios-plus-outline\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 512 512\"},on:{\"click\":_vm.uploadimg}},[_c('path',{attrs:{\"d\":\"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm0 398.7c-105.1 0-190.7-85.5-190.7-190.7S150.9 65.3 256 65.3 446.7 150.9 446.7 256 361.1 446.7 256 446.7z\"}}),_c('path',{attrs:{\"d\":\"M264.1 128h-16.8v119.9H128v16.8h119.3V384h16.8V264.7H384v-16.8H264.1z\"}})]),_vm._v(\" \"),_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"upLoad\",\"accept\":\"image/*\"},on:{\"change\":function($event){_vm.upchange($event)}}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.send),expression:\"send\"}],on:{\"click\":_vm.sendmessage}},[_vm._v(\"发送\")])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"tips\"},[_vm._v(\"请描述病情，等待医生回复。\"),_c('br'),_vm._v(\"客服电话\"),_c('a',{attrs:{\"href\":\"tel:4001816106\"}},[_vm._v(\"400-181-6106\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.5.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-4f550308\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.1.23@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.1.23@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.5.0@vue-loader/lib/selector.js?type=template&index=0!./src/view/chat.vue\n// module id = 284\n// module chunks = 5"],"sourceRoot":""}